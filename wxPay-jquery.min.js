$(function(a,p,q){a.fn.wxPay=function(m,e,c,h,f,d,g){var b=!1,k=a.extend({},{pid:"0",desc:""},c),n=!1;c=function(){b=!0};"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",c,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",c),document.attachEvent("onWeixinJSBridgeReady",c)):b=!0;"undefined"==typeof e||""==e?alert("OpenID\u9519\u8bef"):"5.0">a.fn.wxPay.WxVersion()?alert("\u8bf7\u5347\u7ea7\u5fae\u4fe1\u5ba2\u6237\u7aef"):
(""==k.desc&&(k.desc="\u5907\u6ce8\u4e0d\u80fd\u4e3a\u7a7a-wxpay.net"),a(this).click(function(){n=!1;if(b||a.fn.wxPay.Debug){var c=0;if("function"==typeof h){var l=h();if(null==l||"undefined"==typeof l)n=!0;isNaN(parseFloat(l))||(c=100*l)}!n&&0<c&&a.post(m,{openid:e,tfee:c,body:k.desc,pid:k.pid,param:a.fn.wxPay.OrderParam,sp_billno:a.fn.wxPay.OrderCode},function(a){"ERROR"==a.paySign?"function"==typeof d&&d(a.package):WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,
nonceStr:a.nonceStr,"package":a.package,signType:"MD5",paySign:a.paySign},function(b){"get_brand_wcpay_request:ok"==b.err_msg?"function"==typeof f&&f():"get_brand_wcpay_request:fail"==b.err_msg?"function"==typeof d&&d(b.err_desc):"function"==typeof g&&g(a.payNo)})},"json")}}))};a.fn.SelectAddress=function(m,e,c,h,f,d,g){"5.0">a.fn.wxPay.WxVersion()?alert("\u8bf7\u5347\u7ea7\u5fae\u4fe1\u5ba2\u6237\u7aef"):a(this).click(function(){WeixinJSBridge.invoke("editAddress",{appId:m,scope:"jsapi_address",
signType:"sha1",addrSign:e,timeStamp:c,nonceStr:h},function(b){"edit_address:ok"==b.err_msg?"function"==typeof f&&(a.fn.wxPay.SelectedAddr=b.proviceFirstStageName+" "+b.addressCitySecondStageName+" "+b.addressCountiesThirdStageName+" "+b.addressDetailInfo,f(b)):"edit_address:fail"==b.err_msg?"function"==typeof d&&d(b.err_desc):"function"==typeof g&&g("\u7528\u6237\u53d6\u6d88")})})};a.fn.wxPay.SelectedAddr="";a.fn.wxPay.OrderParam="";a.fn.wxPay.OrderCode="";a.fn.wxPay.Debug=!1;a.fn.wxPay.WxVersion=
function(){var a=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i);return a?a[1]:0}})(jQuery,window);