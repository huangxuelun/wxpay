$(function(a,p,q){a.fn.wxPay=function(m,d,b,h,e,c,f){var g=!1,k=a.extend({},{pid:"0",desc:""},b),n=!1;b=function(){g=!0};"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",b,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",b),document.attachEvent("onWeixinJSBridgeReady",b)):g=!0;"undefined"==typeof d||""==d?alert("OpenID\u9519\u8bef"):"5.0">a.fn.wxPay.WxVersion()?alert("\u8bf7\u5347\u7ea7\u5fae\u4fe1\u5ba2\u6237\u7aef"):
(""==k.desc&&(k.desc="\u5907\u6ce8\u4e0d\u80fd\u4e3a\u7a7a-wxpay.net"),a(this).click(function(){n=!1;if(g||a.fn.wxPay.Debug){var b=0;if("function"==typeof h){var l=h();if(null==l||"undefined"==typeof l)n=!0;isNaN(parseFloat(l))||(b=b=function(){var a=0,b=l.toString();try{a+=b.split(".")[1].length}catch(g){}try{a+=["100"][1].length}catch(g){}return Number(b.replace(".",""))*Number("100".replace(".",""))/Math.pow(10,a)}().toFixed(0))}!n&&0<b&&a.post(m,{openid:d,tfee:b,body:k.desc,pid:k.pid,param:a.fn.wxPay.OrderParam,
sp_billno:a.fn.wxPay.OrderCode},function(a){"ERROR"==a.paySign?"function"==typeof c&&c(a.package):WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,"package":a.package,signType:"MD5",paySign:a.paySign},function(b){"get_brand_wcpay_request:ok"==b.err_msg?"function"==typeof e&&e():"get_brand_wcpay_request:fail"==b.err_msg?"function"==typeof c&&c(b.err_desc):"function"==typeof f&&f(a.payNo)})},"json")}}))};a.fn.SelectAddress=function(m,d,b,h,e,c,f){"5.0">
a.fn.wxPay.WxVersion()?alert("\u8bf7\u5347\u7ea7\u5fae\u4fe1\u5ba2\u6237\u7aef"):a(this).click(function(){WeixinJSBridge.invoke("editAddress",{appId:m,scope:"jsapi_address",signType:"sha1",addrSign:d,timeStamp:b,nonceStr:h},function(b){"edit_address:ok"==b.err_msg?"function"==typeof e&&(a.fn.wxPay.SelectedAddr=b.proviceFirstStageName+" "+b.addressCitySecondStageName+" "+b.addressCountiesThirdStageName+" "+b.addressDetailInfo,e(b)):"edit_address:fail"==b.err_msg?"function"==typeof c&&c(b.err_desc):
"function"==typeof f&&f("\u7528\u6237\u53d6\u6d88")})})};a.fn.wxPay.SelectedAddr="";a.fn.wxPay.OrderParam="";a.fn.wxPay.OrderCode="";a.fn.wxPay.Debug=!1;a.fn.wxPay.WxVersion=function(){var a=navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i);return a?a[1]:0}})(jQuery,window);